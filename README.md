# Diplom_3

<h2>Автотесты для UI</h2>

<h3>Описание проекта</h3>

Проект содержит автотесты для учебного сервиса "Stellar Burgers".
Реализованы тесты для проверки:
1. Регистрации пользователя (успешная и с ошибкой пароля)
2. Входа в систему через различные способы
3. Навигации по разделам конструктора бургеров

<h3>Технологии</h3>

1. Язык программирования: Java 11
2. Фреймворк для тестирования: JUnit 4.13.2
3. Библиотека для автоматизации браузера: Selenium WebDriver 4.34.0
4. Управление драйверами: WebDriverManager 5.6.3
5. Система отчетов: Allure 2.12.0
6. Генерация тестовых данных: DataFaker 1.9.0
7. REST API тестирование: RestAssured 5.3.0
8. Автоматическая генерация кода: Lombok 1.18.30
9. Сборка проекта: Maven
10. Поддерживаемые браузеры: Google Chrome, Яндекс Браузер

<h3>Структура проекта</h3>

`src/main/java` — основной код проекта  
`src/test/java` — тестовые классы  

Пакет `pageobject` — содержит Page Object классы для страниц приложения  
Пакет `tests` — содержит тестовые классы, сгруппированные по функциональности
Пакет `api` — содержит классы для работы с REST API  
Пакет `constants` — тестовые данные и константы  
Пакет `models` — модели данных для API запросов  
Пакет `utils` — утилитные классы для настройки драйвера и API

<h3>Архитектурные решения</h3>

1. Page Object Pattern - отдельные классы для каждой страницы
2. UserApi - отдельный класс для работы с API пользователей
3. DataFaker - генерация реалистичных тестовых данных
4. Lombok - автоматическая генерация кода для моделей данных
5. Фабрика браузеров - унифицированное создание WebDriver для разных браузеров
6. Разделение ответственности - UI логика в Page Objects, API логика в отдельных классах

<h3>Настройка проекта</h3>

1. Установите Java 11
2. Установите Maven
3. Установите браузеры: Google Chrome и Яндекс Браузер последней версии
4. Установите Яндекс Драйвер
   - Скачайте версию, соответствующую вашему Яндекс Браузеру (https://github.com/yandex/YandexDriver/releases)
   - Распакуйте архив
   - Поместите исполняемый файл в системный PATH или укажите путь к драйверу в системной переменной

<h3>Запуск тестов</h3>

1. Запуск всех тестов в Chrome (по умолчанию): `mvn clean test`
2. Запуск всех тестов в Яндекс Браузере:
- Откройте файл `src/test/resources/browser.properties`
- Измените значение `browser=CHROME` на `browser=YANDEX`
- Запустите тесты: `mvn clean test`

**Генерация отчета Allure:** `mvn allure:serve`

<h3>Отчёт Allure</h3>

Для всех тестов сгенерирован и добавлен в проект отчёт Allure, который визуализирует результаты:
- Детальная информация о каждом тесте с аннотациями @Step и @Description
- Шаги выполнения с аннотациями @Step
- Скриншоты и логи при ошибках
- Графики успешности тестов
- Время выполнения каждого теста

Отчёт генерируется автоматически после запуска тестов и доступен через локальный веб-сервер.

<h3>Реализованные тесты</h3>

**Регистрация**
- `successfulRegistrationTest` - успешная регистрация пользователя
- `registrationWithShortPasswordTest` - ошибка при коротком пароле (<6 символов)

**Вход в систему**
- `loginViaAccountButtonTest` - вход по кнопке «Войти в аккаунт» на главной
- `loginViaPersonalAccountTest` - вход через кнопку «Личный кабинет»
- `loginFromRegistrationPageTest` - вход через кнопку в форме регистрации
- `loginFromPasswordRecoveryPageTest` - вход через кнопку в форме восстановления пароля
- `successfulLoginTest` - успешный вход с валидными данными (пользователь создается через API)
- `loginWithInvalidPasswordTest` - ошибка при неверном пароле (пользователь создается через API)

**Конструктор**
- `navigateToBunsSectionTest` - переход к разделу «Булки»
- `navigateToSaucesSectionTest` - переход к разделу «Соусы»
- `navigateToFillingsSectionTest` - переход к разделу «Начинки»

<h3>Особенности реализации</h3>

1. **Page Object Pattern** - отдельные классы для каждой страницы с локаторами в полях класса
2. **Разделение API и UI логики** - REST API вынесен в отдельный класс UserApi
3. **Централизованная конфигурация API** - Base URL вынесен в ApiConfig через Request Specification
4. **Реалистичные тестовые данные** - генерация через DataFaker вместо ручного создания
5. **Allure отчеты** - детальная визуализация с аннотациями @Step и @Description
6. **Явные ожидания** - стабильность тестов при загрузке элементов
7. **Автоматическая генерация кода** - использование Lombok для моделей данных
8. **Поддержка нескольких браузеров** - Chrome и Яндекс Браузер
9. **Селективное использование API** - API используется только там, где это необходимо (логин тесты)
10. **Управление тестовыми данными** - автоматическая очистка созданных пользователей после выполнения тестов
11. **Стабильные локаторы** - использование локаторов, привязанных к тексту меток вместо порядковых номеров

<h3>Архитектура Page Object</h3>

- `MainPage` - главная страница с конструктором бургеров
- `LoginPage` - страница авторизации
- `RegisterPage` - страница регистрации

<h3>Архитектура API</h3>

- `UserApi` - класс для работы с API пользователей (создание, удаление)
- `ApiConfig` - конфигурация REST API запросов
- `User` - модель данных для регистрации
- `UserCredentials` - модель данных для авторизации

<h3>Интеграция с API</h3>

**Селективное использование API:**
- **Тесты регистрации** - пользователи создаются только через веб-интерфейс
- **Тесты входа в систему** - пользователи создаются через API для подготовки тестовых данных
- **Очистка данных** - все созданные пользователи удаляются через API после тестов

1. Тесты `successfulLoginTest` и `loginWithInvalidPasswordTest` создают пользователей через API перед выполнением 
2. Используется официальное API сервиса Stellar Burgers 
3. Генерация уникальных реалистичных данных через DataFaker

**Управление тестовыми данными:**

1. Все пользователи, созданные через API, автоматически удаляются после выполнения тестов
2. Пользователи, зарегистрированные через UI в тесте `successfulRegistrationTest`, также удаляются после теста
3. Реализован полный цикл: создание → использование → удаление тестовых данных


<h3>Внесенные улучшения</h3>

1. **Разделение API и UI** - создан отдельный класс UserApi для работы с REST API
2. **Селективное создание пользователей** - в тестах регистрации пользователи создаются только через UI
3. **DataFaker** - замена генератора email на реалистичные тестовые данные
4. **Lombok** - автоматическая генерация кода для моделей данных
5. **ApiConfig** - централизованная конфигурация Base URL через Request Specification
6. **Allure аннотации** - добавлены @Step и @Description для всех тестовых методов
7. **Стабильные локаторы** - заменены локаторы с порядковых номеров на привязанные к тексту меток
8. **Полная авторизация** - добавлена процедура авторизации в соответствующих тестах
9. **Уникальные данные** - все тесты используют уникальные данные
10. **Валидация пароля** - исправлен тест проверки короткого пароля

<h3>Известные проблемы</h3>

- **Баг в верстке конструктора** - родительский контейнер перекрывает клик на разделы "Булки"