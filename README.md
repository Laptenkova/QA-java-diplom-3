# Diplom_3

<h2>Автотесты для UI</h2>

<h3>Описание проекта</h3>
Проект содержит автотесты для учебного сервиса "Stellar Burgers".
Реализованы тесты для проверки:

- Регистрации пользователя (успешная и с ошибкой пароля)
- Входа в систему через различные способы
- Навигации по разделам конструктора бургеров

<h3>Технологии</h3>

- Язык программирования: Java 11
- Фреймворк для тестирования: JUnit 4.13.2
- Библиотека для автоматизации браузера: Selenium WebDriver 4.34.0
- Управление драйверами: WebDriverManager 5.6.3
- Система отчетов: Allure 2.12.0
- Сборка проекта: Maven
- Поддерживаемые браузеры: Google Chrome, Яндекс Браузер
- REST API тестирование: RestAssured 5.3.0

<h3>Структура проекта</h3>
`src/main/java` — основной код проекта<br>
`src/test/java` — тестовые классы<br>
Пакет `pageobject` — содержит Page Object классы для страниц приложения<br>
Пакет `tests` — содержит тестовые классы, сгруппированные по функциональности<br>
Пакет `browser` — управление WebDriver для разных браузеров<br>
Пакет `constants` — тестовые данные и константы

<h3>Настройка проекта</h3>

1. Установите Java 11
2. Установите Maven
3. Установите браузеры: Google Chrome и Яндекс Браузер последней версии
4. Установите Яндекс Драйвер
    - Скачайте версию, соответствующую вашему Яндекс Браузеру (https://github.com/yandex/YandexDriver/releases)
    - Распакуйте архив
    - Поместите исполняемый файл в системный PATH или укажите путь к драйверу в системной переменной

<h3>Запуск тестов</h3>

Запуск всех тестов в Chrome (по умолчанию): `mvn clean test`

Запуск всех тестов в Яндекс Браузере:

1. Откройте файл `src/test/resources/browser.properties`
2. Измените значение `browser=CHROME` на `browser=YANDEX`
3. Запустите тесты: `mvn clean test`

<h3>Генерация отчета Allure</h3> `mvn allure:serve`

<h3>Отчёт Allure</h3>
Для всех тестов сгенерирован и добавлен в проект отчёт Allure, который визуализирует результаты:

- Детальная информация о каждом тесте
- Шаги выполнения с аннотациями @Step
- Скриншоты и логи при ошибках
- Графики успешности тестов
- Время выполнения каждого теста

Отчёт генерируется автоматически после запуска тестов и доступен через локальный веб-сервер.

<h3>Реализованные тесты</h3>

<h4>Регистрация</h4>

- `successfulRegistrationTest` - успешная регистрация пользователя
- `registrationWithShortPasswordTest` - ошибка при коротком пароле (<6 символов)

<h4>Вход в систему</h4>

- `loginViaAccountButtonTest` - вход по кнопке «Войти в аккаунт» на главной
- `loginViaPersonalAccountTest` - вход через кнопку «Личный кабинет»
- `loginFromRegistrationPageTest` - вход через кнопку в форме регистрации
- `loginFromPasswordRecoveryPageTest` - вход через кнопку в форме восстановления пароля
- `successfulLoginTest` - успешный вход с валидными данными (пользователь создается через API)
- `loginWithInvalidPasswordTest` - ошибка при неверном пароле (пользователь создается через API)

<h4>Конструктор</h4>

- `navigateToBunsSectionTest` - переход к разделу «Булки»
- `navigateToSaucesSectionTest` - переход к разделу «Соусы»
- `navigateToFillingsSectionTest` - переход к разделу «Начинки»

<h3>Особенности реализации</h3>

1. **Page Object Pattern** - отдельные классы для каждой страницы
2. **Фабрика браузеров** - унифицированное создание WebDriver для разных браузеров
3. **Allure отчеты** - детальная визуализация результатов тестирования
4. **Явные ожидания** - стабильность тестов при загрузке элементов
5. **Разделение тестовых данных** - константы вынесены в отдельный класс
6. **Поддержка нескольких браузеров** - Chrome и Яндекс Браузер
7. **Интеграция с API** - тестовые пользователи создаются через REST API перед выполнением UI тестов
8. **Управление тестовыми данными** - автоматическая очистка созданных пользователей после выполнения тестов

<h3>Архитектура Page Object</h3>

* `MainPage` - главная страница с конструктором бургеров
* `LoginPage` - страница авторизации
* `RegisterPage` - страница регистрации

<h3>Интеграция с API</h3>
Для тестов, требующих предварительно созданного пользователя, реализована интеграция с REST API:

**Создание пользователей через API:**

- Тесты `successfulLoginTest` и `loginWithInvalidPasswordTest` создают пользователей через API перед выполнением
- Используется официальное API сервиса Stellar Burgers
- Автоматическая генерация уникальных email для избежания конфликтов

**Управление тестовыми данными:**

- Все пользователи, созданные через API, автоматически удаляются после выполнения тестов
- Пользователи, зарегистрированные через UI в тесте `successfulRegistrationTest`, также удаляются после теста
- Реализован полный цикл: создание → использование → удаление тестовых данных

<h3>Известные проблемы</h3>

- **Баг в валидации пароля** - при вводе неверного пароля не появляется сообщение об ошибке
- **Баг в верстке конструктора** - родительский контейнер перекрывает клик на разделы "Булки"